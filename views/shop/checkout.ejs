<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/checkout.css">
</head>

<body>
  <div class="container">
    <h1>Checkout</h1>
    <form class="checkout-form" action="/checkout" method="post">
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required>
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required>
      </div>
      <div class="form-group">
        <label for="address">Address</label>
        <input type="text" id="address" name="address" required>
      </div>
      <div class="form-group">
        <label for="city">City</label>
        <input type="text" id="city" name="city" required>
      </div>
      <div class="form-group">
        <label for="country">Country</label>
        <input type="text" id="country" name="country" required>
      </div>
      <div class="form-group">
        <label for="postal-code">Postal Code</label>
        <input type="text" id="postal-code" name="postalCode" required>
      </div>
      <div class="form-group">
        <input type="submit" value="Place Order">
      </div>
    </form>
    <div class="summary">
      <h2>Order Summary</h2>
      <% if (cart && cart.items.length > 0) { %>
      <% cart.items.forEach(item => { %>
      <div class="summary-item">
        <span><%= item.productId.title %> (x<%= item.quantity %>)</span>
        <span>$<%= item.productId.price * item.quantity %></span>
      </div>
      <% }); %>
      <div class="summary-total">
        <span>Total:</span>
        <span>$<%= totalSum %></span>
      </div>
      <% } else { %>
      <p>No items in cart</p>
      <% } %>
    </div>
  </div>
  <%- include('../includes/end.ejs') %>